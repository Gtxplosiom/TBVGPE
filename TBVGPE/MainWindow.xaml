<Window x:Class="TBVGPE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TBVGPE"
        xmlns:ControllerViews="clr-namespace:TBVGPE.Views.Controller.Presets"
        xmlns:ControllerViewModels="clr-namespace:TBVGPE.ViewModels.Controllers"
        mc:Ignorable="d"
        Title="MainWindow"
        WindowStartupLocation="Manual"
        Left="0" Top="0"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        Focusable="False">

    <Window.Resources>
        <Style TargetType="{x:Type ControllerViewModels:ControllerWrapperViewModel}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ControllerViewModels:ControllerWrapperViewModel}">
                        <Border BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <DataTemplate DataType="{x:Type ControllerViewModels:GBAControllerViewModel}">
            <ControllerViews:GBAControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:DSControllerViewModel}">
            <ControllerViews:DSControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:Xbox360ControllerViewModel}">
            <ControllerViews:Xbox360ControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:_3DSControllerViewModel}">
            <ControllerViews:_3DSControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:PS4ControllerViewModel}">
            <ControllerViews:PS4ControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:SwitchControllerViewModel}">
            <ControllerViews:SwitchControllerLayout />
        </DataTemplate>
        <DataTemplate DataType="{x:Type ControllerViewModels:CustomControllerLayout}">
            <ControllerViews:CustomControllerLayout />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <!-- para ma fill an rest na diri gagamit ngan ma anchor ha ubos an utility ngan controller -->
            <RowDefinition Height="Auto"/>
            <!-- TODO: Make the row height below dynamic kay an controller layouts iba iba an heights -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel x:Name="UtilityButtons" Background="#DDD" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10,10,0,10" Grid.Row="1">
            <Button x:Name="CloseApplicationBtn"
                    Content="Close TBVGPE" 
                    Command="{Binding CloseApplicationCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="Red"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Button x:Name="CloseCurrentAppBtn"
                    Content="Close Current App" 
                    Command="{Binding CloseCurrentAppCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="Red"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Margin="10,0,0,0"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Line X1="0" Y1="0" X2="0" Y2="30"
                  Stroke="Black" StrokeThickness="2"
                  VerticalAlignment="Center"
                  Margin="10,0,0,0"
                  Visibility="{Binding UtilityMenuVisibility}"/>

            <Button x:Name="ToggleEditModeBtn"
                    Content="{Binding ToggleEditModeText}" 
                    Command="{Binding ToggleEditModeCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="#DDD"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Margin="10,0,0,0"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Button x:Name="LoadDefaultLayoutBtn"
                    Content="Load Default" 
                    Command="{Binding LoadDefaultLayoutCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="#CCC"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Margin="10,0,0,0"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Button x:Name="ToggleControllerBtn"
                    Content="{Binding ToggleControllerText}" 
                    Command="{Binding ToggleControllerCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="#BBB"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Margin="10,0,0,0"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Slider x:Name="ControllerTransparencySlider"
                    Minimum="0.0"
                    Maximum="1.0"
                    Value="{Binding ControllerTransparency}"
                    Width="120" Height="35"
                    Margin="10,0,0,0"
                    Visibility="{Binding UtilityMenuVisibility}"/>

            <Button x:Name="toggleMenuBtn"
                    Content="{Binding ToggleMenuText}" 
                    Command="{Binding ToggleMenuCommand}"
                    Width="Auto" Height="35"
                    FontSize="14" FontWeight="Bold"
                    Foreground="White" Background="#AAA"
                    BorderThickness="1"
                    BorderBrush="#555"
                    Margin="10,0,0,0"/>
        </StackPanel>

        <ContentControl Grid.Row="2"
                        Content="{Binding CurrentControllerViewModel}"
                        Height="Auto"
                        VerticalAlignment="Bottom"
                        Margin="0,0,0,50"
                        Visibility="{Binding ControllerVisibility}"
                        Opacity="{Binding ControllerTransparency}"/>
    </Grid>
</Window>
